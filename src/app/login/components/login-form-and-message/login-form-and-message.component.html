<div class="form-and-message-container">
    <app-login-sucess-message *ngIf="emailSent; else loginForm"></app-login-sucess-message>

    <ng-template #loginForm>
        <div class="loginForm">
            <mat-card class="loginForm__card">
                <mat-card-title class="card-title">
                    {{ formTitle}}
                </mat-card-title>
                <mat-card-content class="card-content">
                    <form [formGroup]="formLogin" (ngSubmit)="sendForm()">
                        <mat-form-field class="form-field" appearance="outline">
                            <mat-label>{{ nameLabelField }}</mat-label>
                            <input matInput formControlName="name">
                            <mat-error class="form-field__errors" *ngIf="hasErrors('name') && errorMessages">
                                <span *ngFor="let errorDescription of getErrors('name')">
                                    {{ errorDescription }}
                                </span>
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field class="form-field" appearance="outline">
                            <mat-label>{{ phoneLabelField }}</mat-label>
                            <input matInput formControlName="phone">
                            <mat-error class="form-field__errors" *ngIf="hasErrors('phone') && errorMessages">
                                <span *ngFor="let errorDescription of getErrors('phone')">
                                    {{ errorDescription }}
                                </span>
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field class="form-field" appearance="outline">
                            <mat-label>{{ emailLabelField }}</mat-label>
                            <input matInput formControlName="email">
                            <mat-error class="form-field__errors" *ngIf="hasErrors('email') && errorMessages">
                                <span *ngFor="let errorDescription of getErrors('email')">
                                    {{ errorDescription }}
                                </span>
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field class="form-field" appearance="outline">
                            <mat-label>{{ dniLabelField }}</mat-label>
                            <input matInput formControlName="dni">
                            <mat-error class="form-field__errors" *ngIf="hasErrors('dni') && errorMessages">
                                <span *ngFor="let errorDescription of getErrors('dni')">
                                    {{ errorDescription }}
                                </span>
                            </mat-error>
                        </mat-form-field>

                        <div class="schedule-time">
                            <span class="schedule-time__contact-label">{{ contactLabel }}</span>
                            <mat-radio-group aria-label="schedule contact time" formControlName="contact">
                                <mat-radio-button class="schedule-time__contact-option"value="M">{{ morningContactLabel }}</mat-radio-button>
                                <mat-radio-button value="schedule-time__contact-option">{{ afternoonContactLabel }}</mat-radio-button>
                            </mat-radio-group>
                        </div>

                        <div *ngIf="adviceText" class="form-field">
                            <mat-checkbox formControlName="accept">
                                <span class="accept-label" [innerHTML]="adviceText"></span>
                            </mat-checkbox>

                            <mat-error class="form-field__errors" *ngIf="hasErrors('accept') && errorMessages">
                                <span class="accept-error" *ngFor="let errorDescription of getErrors('accept')">
                                    {{ errorDescription }}
                                </span>
                            </mat-error>
                        </div>

                        <button class="form-field send-button" mat-raised-button color="accent">
                            {{ sendButtonText }}
                        </button>
                    </form>
                </mat-card-content>
            </mat-card>
        </div>
    </ng-template>
</div>